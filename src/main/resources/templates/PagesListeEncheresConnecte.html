<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Enchères.org</title>
    <link rel="stylesheet" href="css/general.css"/>
    <link
            href="https://fonts.googleapis.com/css2?family=Cal+Sans&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"
            rel="stylesheet">
</head>
<body>

<header>
    <nav>
        <div class="titre-entete">
            <a th:if="${session.utilisateurConnecte != null}" th:href="@{/PagesListeEncheresConnecte}">ENI-Enchères</a>
            <span th:unless="${session.utilisateurConnecte != null}">ENI-Enchères</span>
        </div>
        <div class="buttons-nav">
            <div class="button-nav">
                <a th:href="@{/}">Enchères</a>
            </div>
            <div class="button-nav">
                <a th:href="@{'/encheres/creerEnchere'}">Vente article</a>
            </div>
            <div class="button-nav">
                <a th:href="@{'/btnPageMonProfil'}">Mon profil</a>
            </div>
        </div>
        <div class="button-nav">
            <a th:href="@{'/logout'}">Deconnexion</a>
        </div>
    </nav>
</header>

<div class="main-wrapper">

    <h1>Liste des enchères</h1>

    <section class="filtres-container">
        <h2>Filtres :</h2>
        <form method="post" action="/PagesListeEncheresConnecte">
            <input type="search" name="nomArticle" size="30" placeholder="Le nom de l'article contient" th:value="${nomArticle}"> <br><br>
            <label>Catégorie :</label>
            <select name="categorie">
                <option value="" th:selected="${categorieSelectionnee == null or categorieSelectionnee == ''}">-- Toutes les catégories --</option>
                <option value="Informatique" th:selected="${categorieSelectionnee == 'Informatique'}">Informatique</option>
                <option value="Ameublement" th:selected="${categorieSelectionnee == 'Ameublement'}">Ameublement</option>
                <option value="Vêtement" th:selected="${categorieSelectionnee == 'Vêtement'}">Vêtement</option>
                <option value="Sports&Loisirs" th:selected="${categorieSelectionnee == 'Sports&Loisirs'}">Sports&Loisirs</option>
            </select>

            <section class="RG-AchatVente">
                <label><input type="radio" name="type" checked>
                    Achats</label>
                <label><input type="radio" name="type"> Mes ventes</label>
            </section>

            <section class="AchatVente">
                <div class="CB-achat">
                    <label><input type="checkbox"> enchères ouvertes</label>
                    <label><input type="checkbox"> mes enchères</label>
                    <label><input type="checkbox"> mes enchères remportées</label>
                </div>
                <div class="CB-Vente">
                    <label><input type="checkbox"> mes ventes en cours</label>
                    <label><input type="checkbox" checked> ventes non débutées</label>
                    <label><input type="checkbox"> ventes terminées</label>
                </div>
            </section>

            <aside class="asideBtn">
                <button type="submit">Rechercher</button>
            </aside>
        </form>
    </section>

    <!-- Utilisation de articleVendu au lieu de article -->
    <section class="detailVente-container" th:each="a : ${articleVendu}">
        <div class="photoArticle-container">
            <!-- Affichage conditionnel des images par catégorie -->
            <img th:if="${a.categorieArticle != null and a.categorieArticle.libelle == 'Informatique'}" th:src="@{/images/informatique.png}" alt="Informatique">
            <img th:if="${a.categorieArticle != null and a.categorieArticle.libelle == 'Ameublement'}" th:src="@{/images/ameublement.png}" alt="Ameublement">
            <img th:if="${a.categorieArticle != null and a.categorieArticle.libelle == 'Vêtement'}" th:src="@{/images/vetement.png}" alt="Vêtement">
            <img th:if="${a.categorieArticle != null and a.categorieArticle.libelle == 'Sports&Loisirs'}" th:src="@{/images/sports.png}" alt="Sports & Loisirs">
            <!-- Image par défaut si pas de catégorie -->
            <img th:if="${a.categorieArticle == null}" th:src="@{/images/logoENI.png}" alt="Article">
        </div>

        <div class="Article-vente-container">
            <!-- Lien vers le détail de l'article -->
            <a th:text="${a.nomArticle}" th:href="@{/encheres/detail(id=${a.idArticle})}"></a>

            <ul>
                <!-- Affichage des vraies données de l'article -->
                <li th:text="${a.nomArticle}">Nom Article</li>
                <li th:text="${a.miseAPrix} + ' €'">Prix Article</li>
                <li th:text="${#temporals.format(a.dateFinEncheres, 'dd/MM/yyyy')}">Fin Enchères</li>
                <li>
                    Vendeur :
                    <!-- Affichage du vrai pseudo du vendeur -->
                    <span th:text="${a.vendeur.pseudo}">Nom du vendeur</span>
                    <!-- <a th:href="@{/PageProfilUtilisateur/{id}(id=${a.vendeur.id})}" th:text="${a.vendeur.pseudo}">Voir profil</a> -->
                </li>
            </ul>
        </div>
    </section>
</div>
</body>
</html>